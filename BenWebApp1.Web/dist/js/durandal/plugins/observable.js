define(["durandal/system","durandal/binder","knockout"],function(e,r,t){function n(e){var r=e[0];return"_"===r||"$"===r||P&&e===P}function o(r){return!(!r||void 0===r.nodeType||!e.isNumber(r.nodeType))}function i(e){if(!e||o(e)||e.ko===t||e.jquery)return!1;var r=p.call(e);return y.indexOf(r)==-1&&!(e===!0||e===!1)}function a(e){var r={};return Object.defineProperty(e,"__observable__",{enumerable:!1,configurable:!1,writable:!1,value:r}),r}function u(e,r,t){var n=e.__observable__,o=!0;if(!n||!n.__full__){n=n||a(e),n.__full__=!0,h.forEach(function(t){r[t]=function(){return m[t].apply(e,arguments)}}),d.forEach(function(t){e[t]=function(){o=!1;var e=j[t].apply(r,arguments);return o=!0,e}}),_.forEach(function(t){e[t]=function(){o&&r.valueWillMutate();var n=m[t].apply(e,arguments);return o&&r.valueHasMutated(),n}}),g.forEach(function(n){e[n]=function(){for(var i=0,a=arguments.length;i<a;i++)l(arguments[i],t);o&&r.valueWillMutate();var u=m[n].apply(e,arguments);return o&&r.valueHasMutated(),u}}),e.splice=function(){for(var n=2,i=arguments.length;n<i;n++)l(arguments[n],t);o&&r.valueWillMutate();var a=m.splice.apply(e,arguments);return o&&r.valueHasMutated(),a};for(var i=0,u=e.length;i<u;i++)l(e[i],t)}}function l(r,n){var o,l;if(P&&r&&r[P]&&(n=n?n.slice(0):[],n.push(r[P])),i(r)&&(o=r.__observable__,!o||!o.__full__)){if(o=o||a(r),o.__full__=!0,e.isArray(r)){var c=t.observableArray(r);u(r,c,n)}else for(var b in r)if(!v(b)&&!o[b]){var p=Object.getPropertyDescriptor(r,b);p&&(p.get||p.set)?s(r,b,{get:p.get,set:p.set}):(l=r[b],e.isFunction(l)||f(r,b,l,n))}O&&e.log("Converted",r)}}function c(e,r,t){t?r?r.destroyAll||u(r,e):(r=[],u(r,e)):l(r),e(r)}function f(r,n,o,i){var f,s,b=r.__observable__||a(r);if(void 0===o&&(o=r[n]),e.isArray(o))f=t.observableArray(o),u(o,f,i),s=!0;else if("function"==typeof o){if(!t.isObservable(o))return null;f=o}else!A&&e.isPromise(o)?(f=t.observable(),o.then(function(r){if(e.isArray(r)){var n=t.observableArray(r);u(r,n,i),r=n}f(r)})):(f=t.observable(o),l(o,i));return i&&i.length>0&&i.forEach(function(t){e.isArray(o)?f.subscribe(function(e){t(r,n,null,e)},null,"arrayChange"):f.subscribe(function(e){t(r,n,e,null)})}),Object.defineProperty(r,n,{configurable:!0,enumerable:!0,get:f,set:t.isWriteableObservable(f)?function(r){r&&e.isPromise(r)&&!A?r.then(function(r){c(f,r,e.isArray(r))}):c(f,r,s)}:void 0}),b[n]=f,f}function s(r,n,o){var i,a={owner:r,deferEvaluation:!0};return"function"==typeof o?a.read=o:("value"in o&&e.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof o.get&&"function"!=typeof o.read&&e.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),a.read=o.get||o.read,a.write=o.set||o.write),i=t.computed(a),Object.defineProperty(r,n,{configurable:!0,enumerable:!0,value:i}),f(r,n,i)}var b,v,p=Object.prototype.toString,y=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],d=["remove","removeAll","destroy","destroyAll","replace"],_=["pop","reverse","sort","shift","slice"],g=["push","unshift"],h=["filter","map","reduce","reduceRight","forEach","every","some"],m=Array.prototype,j=t.observableArray.fn,O=!1,P=void 0,A=!1;if(!("getPropertyDescriptor"in Object)){var E=Object.getOwnPropertyDescriptor,D=Object.getPrototypeOf;Object.getPropertyDescriptor=function(e,r){for(var t,n=e;n&&!(t=E(n,r));)n=D(n);return t}}return b=function(e,r){var n,o,i;return e?(n=e.__observable__,n&&(o=n[r])?o:(i=e[r],t.isObservable(i)?i:f(e,r,i))):null},b.defineProperty=s,b.convertProperty=f,b.convertObject=l,b.install=function(e){var t=r.binding;r.binding=function(e,r,n){n.applyBindings&&!n.skipConversion&&l(e),t(e,r)},O=e.logConversion,e.changeDetection&&(P=e.changeDetection),A=e.skipPromises,v=e.shouldIgnorePropertyName||n},b});
//# sourceMappingURL=../../maps/durandal/plugins/observable.js.map

{"version":3,"sources":["durandal/plugins/http.js"],"names":["define","$","ko","callbackParam","toJSON","data","get","url","query","headers","ajax","toJS","jsonp","indexOf","this","dataType","put","type","contentType","post","remove"],"mappings":"AAWAA,QAAQ,SAAU,YAAa,SAAUC,EAAGC,GAKxC,OAMIC,cAAe,WAOfC,OAAQ,SAASC,GACb,MAAOH,GAAGE,OAAOC,IAUrBC,IAAK,SAAUC,EAAKC,EAAOC,GACvB,MAAOR,GAAES,KAAKH,GAAOF,KAAMG,EAAOC,QAASP,EAAGS,KAAKF,MAWvDG,MAAO,SAAUL,EAAKC,EAAOL,EAAeM,GAaxC,MAZIF,GAAIM,QAAQ,YACZV,EAAgBA,GAAiBW,KAAKX,cAGlCI,GADAA,EAAIM,QAAQ,SACL,IAEA,IAGXN,GAAOJ,EAAgB,MAGpBF,EAAES,MACLH,IAAKA,EACLQ,SAAU,QACVV,KAAMG,EACNC,QAASP,EAAGS,KAAKF,MAWzBO,IAAI,SAAST,EAAKF,EAAMI,GACpB,MAAOR,GAAES,MACLH,IAAKA,EACLF,KAAMS,KAAKV,OAAOC,GAClBY,KAAM,MACNC,YAAa,mBACbH,SAAU,OACVN,QAASP,EAAGS,KAAKF,MAWzBU,KAAM,SAAUZ,EAAKF,EAAMI,GACvB,MAAOR,GAAES,MACLH,IAAKA,EACLF,KAAMS,KAAKV,OAAOC,GAClBY,KAAM,OACNC,YAAa,mBACbH,SAAU,OACVN,QAASP,EAAGS,KAAKF,MAWzBW,OAAO,SAASb,EAAKC,EAAOC,GACxB,MAAOR,GAAES,MACLH,IAAKA,EACLF,KAAMG,EACNS,KAAM,SACNR,QAASP,EAAGS,KAAKF","file":"../../../durandal/plugins/http.js","sourcesContent":["/**\r\n * Durandal 2.2.0 Copyright (c) 2010-2016 Blue Spire Consulting, Inc. All Rights Reserved.\r\n * Available via the MIT license.\r\n * see: http://durandaljs.com or https://github.com/BlueSpire/Durandal for details.\r\n */\r\n/**\r\n * Enables common http request scenarios.\r\n * @module http\r\n * @requires jquery\r\n * @requires knockout\r\n */\r\ndefine(['jquery', 'knockout'], function ($, ko) {\r\n    /**\r\n     * @class HTTPModule\r\n     * @static\r\n     */\r\n    return {\r\n        /**\r\n         * The name of the callback parameter to inject into jsonp requests by default.\r\n         * @property {string} callbackParam\r\n         * @default callback\r\n         */\r\n        callbackParam: 'callback',\r\n        /**\r\n         * Converts the data to JSON.\r\n         * @method toJSON\r\n         * @param {object} data The data to convert to JSON.\r\n         * @return {string} JSON.\r\n         */\r\n        toJSON: function(data) {\r\n            return ko.toJSON(data);\r\n        },\r\n        /**\r\n         * Makes an HTTP GET request.\r\n         * @method get\r\n         * @param {string} url The url to send the get request to.\r\n         * @param {object} [query] An optional key/value object to transform into query string parameters.\r\n         * @param {object} [headers] The data to add to the request header.  It will be converted to JSON. If the data contains Knockout observables, they will be converted into normal properties before serialization.\r\n         * @return {Promise} A promise of the get response data.\r\n         */\r\n        get: function (url, query, headers) {\r\n            return $.ajax(url, { data: query, headers: ko.toJS(headers) });\r\n        },\r\n        /**\r\n         * Makes an JSONP request.\r\n         * @method jsonp\r\n         * @param {string} url The url to send the get request to.\r\n         * @param {object} [query] An optional key/value object to transform into query string parameters.\r\n         * @param {string} [callbackParam] The name of the callback parameter the api expects (overrides the default callbackParam).\r\n         * @param {object} [headers] The data to add to the request header.  It will be converted to JSON. If the data contains Knockout observables, they will be converted into normal properties before serialization.\r\n         * @return {Promise} A promise of the response data.\r\n         */\r\n        jsonp: function (url, query, callbackParam, headers) {\r\n            if (url.indexOf('=?') == -1) {\r\n                callbackParam = callbackParam || this.callbackParam;\r\n\r\n                if (url.indexOf('?') == -1) {\r\n                    url += '?';\r\n                } else {\r\n                    url += '&';\r\n                }\r\n\r\n                url += callbackParam + '=?';\r\n            }\r\n\r\n            return $.ajax({\r\n                url: url,\r\n                dataType: 'jsonp',\r\n                data: query,\r\n                headers: ko.toJS(headers)\r\n            });\r\n        },\r\n        /**\r\n         * Makes an HTTP PUT request.\r\n         * @method put\r\n         * @param {string} url The url to send the put request to.\r\n         * @param {object} data The data to put. It will be converted to JSON. If the data contains Knockout observables, they will be converted into normal properties before serialization.\r\n         * @param {object} [headers] The data to add to the request header.  It will be converted to JSON. If the data contains Knockout observables, they will be converted into normal properties before serialization.\r\n         * @return {Promise} A promise of the response data.\r\n         */\r\n        put:function(url, data, headers) {\r\n            return $.ajax({\r\n                url: url,\r\n                data: this.toJSON(data),\r\n                type: 'PUT',\r\n                contentType: 'application/json',\r\n                dataType: 'json',\r\n                headers: ko.toJS(headers)\r\n            });\r\n        },\r\n        /**\r\n         * Makes an HTTP POST request.\r\n         * @method post\r\n         * @param {string} url The url to send the post request to.\r\n         * @param {object} data The data to post. It will be converted to JSON. If the data contains Knockout observables, they will be converted into normal properties before serialization.\r\n         * @param {object} [headers] The data to add to the request header.  It will be converted to JSON. If the data contains Knockout observables, they will be converted into normal properties before serialization.\r\n         * @return {Promise} A promise of the response data.\r\n         */\r\n        post: function (url, data, headers) {\r\n            return $.ajax({\r\n                url: url,\r\n                data: this.toJSON(data),\r\n                type: 'POST',\r\n                contentType: 'application/json',\r\n                dataType: 'json',\r\n                headers: ko.toJS(headers)\r\n            });\r\n        },\r\n        /**\r\n         * Makes an HTTP DELETE request.\r\n         * @method remove\r\n         * @param {string} url The url to send the delete request to.\r\n         * @param {object} [query] An optional key/value object to transform into query string parameters.\r\n         * @param {object} [headers] The data to add to the request header.  It will be converted to JSON. If the data contains Knockout observables, they will be converted into normal properties before serialization.\r\n         * @return {Promise} A promise of the get response data.\r\n         */\r\n        remove:function(url, query, headers) {\r\n            return $.ajax({\r\n                url: url,\r\n                data: query,\r\n                type: 'DELETE',\r\n                headers: ko.toJS(headers)\r\n            });\r\n        }\r\n    };\r\n});\r\n"]}
{"version":3,"sources":["angular-message-format.js"],"names":["window","angular","indexToLineAndColumn","text","index","lines","split","i","length","line","column","parseTextLiteral","parsedFn","context","cachedFn","PARSE_CACHE_FOR_TEXT_LITERALS","scope","listener","objectEquality","unwatch","noop","isFunction","subtractOffset","expressionFn","offset","minusOffset","value","newValue","oldValue","MessageSelectorBase","choices","self","this","undefined","$interpolateMinErr","getResult","watchDelegate","MessageSelectorWatchers","msgSelector","lastMessage","messageFnWatcher","expressionFnListener","expressionFnWatcher","SelectMessage","call","SelectMessageProto","PluralMessage","pluralCat","PluralMessageProto","InterpolationParts","trustedContext","allOrNothing","textParts","expressionFns","expressionIndices","partialText","concatParts","InterpolationPartsWatcher","interpolationParts","previousResult","expressionFnsWatcher","newExpressionValues","oldExpressionValues","watchListener","copyNestedParserState","src","dst","expressionMinusOffsetFn","pluralOffset","choiceKey","ruleChoiceKeyword","msgStartIndex","expressionStartIndex","NestedParserState","parser","MessageFormatParser","startIndex","$parse","stringifier","mustHaveExpression","nestedStateStack","rule","ruleStack","interpNestLevel","stringStartIndex","stringQuote","stringInterestsRe","angularOperatorStack","textPart","getEndOperator","opBegin","getBeginOperator","opEnd","Object","create","prototype","getMessageFn","categorizeValue","watchers","cancelWatch","messageFnListener","newMessage","oldMessage","messageFn","isNaN","category","flushPartialText","push","join","addText","addExpressionFn","getExpressionValues","expressionValues","Array","expressionValue","toParsedFn","originalText","errorInParseLogic","watcher","result","EMPTY_STATE","pushState","popState","previousState","pop","matchRe","re","search","lastIndex","match","exec","searchRe","consumeRe","run","initialRule","assertRuleOrNull","NEXT_WORD_RE","errorExpecting","position","word","STRING_START_RE","ruleString","startStringAtMatch","SQUOTED_STRING_INTEREST_RE","DQUOTED_STRING_INTEREST_RE","ruleInsideString","PLURAL_OR_SELECT_ARG_TYPE_RE","rulePluralOrSelect","argType","rulePluralStyle","ruleSelectStyle","rulePluralValueOrKeyword","rulePluralOffset","ruleSelectKeyword","NUMBER_RE","PLURAL_OFFSET_RE","RegExp","source","parseInt","assertChoiceKeyIsNew","SELECT_KEYWORD","ruleMessageText","EXPLICIT_VALUE_OR_KEYWORD_RE","BRACE_OPEN_RE","ruleInInterpolationOrMessageText","INTERP_OR_END_MESSAGE_RE","INTERP_OR_PLURALVALUE_OR_END_MESSAGE_RE","ESCAPE_OR_MUSTACHE_BEGIN_RE","advanceInInterpolationOrMessageText","currentIndex","substring","token","ruleEndMustacheInInterpolationOrMessage","ruleEnteredMustache","ruleInterpolate","ruleInInterpolation","ruleInterpolationEndMustache","ruleEndMustache","ruleAngularExpression","INTERP_END_RE","ruleInAngularExpression","INTERESTING_OPERATORS_RE","innermostOperator","operator","unshift","beginOperator","shift","toJson","$$stringify","$$MessageFormatFactory","$locale","$sce","$exceptionHandler","getStringifier","err","interpolate","$$interpolateDecorator","$$messageFormat","$interpolate","module","angularVersion","$provide"],"mappings":"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","file":"../angular-message-format.js","sourcesContent":["/**\n * @license AngularJS v1.6.6\n * (c) 2010-2017 Google, Inc. http://angularjs.org\n * License: MIT\n */\n(function(window, angular) {'use strict';\n\n// NOTE: ADVANCED_OPTIMIZATIONS mode.\n//\n// This file is compiled with Closure compiler's ADVANCED_OPTIMIZATIONS flag! Be wary of using\n// constructs incompatible with that mode.\n\n/* global isFunction: false */\n/* global noop: false */\n/* global toJson: false */\n/* global $$stringify: false */\n\n// Convert an index into the string into line/column for use in error messages\n// As such, this doesn't have to be efficient.\nfunction indexToLineAndColumn(text, index) {\n  var lines = text.split(/\\n/g);\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n    if (index >= line.length) {\n      index -= line.length;\n    } else {\n      return { line: i + 1, column: index + 1 };\n    }\n  }\n}\nvar PARSE_CACHE_FOR_TEXT_LITERALS = Object.create(null);\n\nfunction parseTextLiteral(text) {\n  var cachedFn = PARSE_CACHE_FOR_TEXT_LITERALS[text];\n  if (cachedFn != null) {\n    return cachedFn;\n  }\n  function parsedFn(context) { return text; }\n  parsedFn['$$watchDelegate'] = function watchDelegate(scope, listener, objectEquality) {\n    var unwatch = scope['$watch'](noop,\n        function textLiteralWatcher() {\n          if (isFunction(listener)) { listener(text, text, scope); }\n          unwatch();\n        },\n        objectEquality);\n    return unwatch;\n  };\n  PARSE_CACHE_FOR_TEXT_LITERALS[text] = parsedFn;\n  parsedFn['exp'] = text; // Needed to pretend to be $interpolate for tests copied from interpolateSpec.js\n  parsedFn['expressions'] = []; // Require this to call $compile.$$addBindingInfo() which allows Protractor to find elements by binding.\n  return parsedFn;\n}\n\nfunction subtractOffset(expressionFn, offset) {\n  if (offset === 0) {\n    return expressionFn;\n  }\n  function minusOffset(value) {\n    return (value == null) ? value : value - offset;\n  }\n  function parsedFn(context) { return minusOffset(expressionFn(context)); }\n  var unwatch;\n  parsedFn['$$watchDelegate'] = function watchDelegate(scope, listener, objectEquality) {\n    unwatch = scope['$watch'](expressionFn,\n        function pluralExpressionWatchListener(newValue, oldValue) {\n          if (isFunction(listener)) { listener(minusOffset(newValue), minusOffset(oldValue), scope); }\n        },\n        objectEquality);\n    return unwatch;\n  };\n  return parsedFn;\n}\n\n// NOTE: ADVANCED_OPTIMIZATIONS mode.\n//\n// This file is compiled with Closure compiler's ADVANCED_OPTIMIZATIONS flag! Be wary of using\n// constructs incompatible with that mode.\n\n/* global $interpolateMinErr: false */\n/* global isFunction: false */\n/* global noop: false */\n\n/**\n * @constructor\n * @private\n */\nfunction MessageSelectorBase(expressionFn, choices) {\n  var self = this;\n  this.expressionFn = expressionFn;\n  this.choices = choices;\n  if (choices['other'] === undefined) {\n    throw $interpolateMinErr('reqother', '“other” is a required option.');\n  }\n  this.parsedFn = function(context) { return self.getResult(context); };\n  this.parsedFn['$$watchDelegate'] = function $$watchDelegate(scope, listener, objectEquality) {\n    return self.watchDelegate(scope, listener, objectEquality);\n  };\n  this.parsedFn['exp'] = expressionFn['exp'];\n  this.parsedFn['expressions'] = expressionFn['expressions'];\n}\n\nMessageSelectorBase.prototype.getMessageFn = function getMessageFn(value) {\n  return this.choices[this.categorizeValue(value)];\n};\n\nMessageSelectorBase.prototype.getResult = function getResult(context) {\n  return this.getMessageFn(this.expressionFn(context))(context);\n};\n\nMessageSelectorBase.prototype.watchDelegate = function watchDelegate(scope, listener, objectEquality) {\n  var watchers = new MessageSelectorWatchers(this, scope, listener, objectEquality);\n  return function() { watchers.cancelWatch(); };\n};\n\n/**\n * @constructor\n * @private\n */\nfunction MessageSelectorWatchers(msgSelector, scope, listener, objectEquality) {\n  var self = this;\n  this.scope = scope;\n  this.msgSelector = msgSelector;\n  this.listener = listener;\n  this.objectEquality = objectEquality;\n  this.lastMessage = undefined;\n  this.messageFnWatcher = noop;\n  var expressionFnListener = function(newValue, oldValue) { return self.expressionFnListener(newValue, oldValue); };\n  this.expressionFnWatcher = scope['$watch'](msgSelector.expressionFn, expressionFnListener, objectEquality);\n}\n\nMessageSelectorWatchers.prototype.expressionFnListener = function expressionFnListener(newValue, oldValue) {\n  var self = this;\n  this.messageFnWatcher();\n  var messageFnListener = function(newMessage, oldMessage) { return self.messageFnListener(newMessage, oldMessage); };\n  var messageFn = this.msgSelector.getMessageFn(newValue);\n  this.messageFnWatcher = this.scope['$watch'](messageFn, messageFnListener, this.objectEquality);\n};\n\nMessageSelectorWatchers.prototype.messageFnListener = function messageFnListener(newMessage, oldMessage) {\n  if (isFunction(this.listener)) {\n    this.listener.call(null, newMessage, newMessage === oldMessage ? newMessage : this.lastMessage, this.scope);\n  }\n  this.lastMessage = newMessage;\n};\n\nMessageSelectorWatchers.prototype.cancelWatch = function cancelWatch() {\n  this.expressionFnWatcher();\n  this.messageFnWatcher();\n};\n\n/**\n * @constructor\n * @extends MessageSelectorBase\n * @private\n */\nfunction SelectMessage(expressionFn, choices) {\n  MessageSelectorBase.call(this, expressionFn, choices);\n}\n\nfunction SelectMessageProto() {}\nSelectMessageProto.prototype = MessageSelectorBase.prototype;\n\nSelectMessage.prototype = new SelectMessageProto();\nSelectMessage.prototype.categorizeValue = function categorizeSelectValue(value) {\n  return (this.choices[value] !== undefined) ? value : 'other';\n};\n\n/**\n * @constructor\n * @extends MessageSelectorBase\n * @private\n */\nfunction PluralMessage(expressionFn, choices, offset, pluralCat) {\n  MessageSelectorBase.call(this, expressionFn, choices);\n  this.offset = offset;\n  this.pluralCat = pluralCat;\n}\n\nfunction PluralMessageProto() {}\nPluralMessageProto.prototype = MessageSelectorBase.prototype;\n\nPluralMessage.prototype = new PluralMessageProto();\nPluralMessage.prototype.categorizeValue = function categorizePluralValue(value) {\n  if (isNaN(value)) {\n    return 'other';\n  } else if (this.choices[value] !== undefined) {\n    return value;\n  } else {\n    var category = this.pluralCat(value - this.offset);\n    return (this.choices[category] !== undefined) ? category : 'other';\n  }\n};\n\n// NOTE: ADVANCED_OPTIMIZATIONS mode.\n//\n// This file is compiled with Closure compiler's ADVANCED_OPTIMIZATIONS flag! Be wary of using\n// constructs incompatible with that mode.\n\n/* global $interpolateMinErr: false */\n/* global isFunction: false */\n/* global parseTextLiteral: false */\n\n/**\n * @constructor\n * @private\n */\nfunction InterpolationParts(trustedContext, allOrNothing) {\n  this.trustedContext = trustedContext;\n  this.allOrNothing = allOrNothing;\n  this.textParts = [];\n  this.expressionFns = [];\n  this.expressionIndices = [];\n  this.partialText = '';\n  this.concatParts = null;\n}\n\nInterpolationParts.prototype.flushPartialText = function flushPartialText() {\n  if (this.partialText) {\n    if (this.concatParts == null) {\n      this.textParts.push(this.partialText);\n    } else {\n      this.textParts.push(this.concatParts.join(''));\n      this.concatParts = null;\n    }\n    this.partialText = '';\n  }\n};\n\nInterpolationParts.prototype.addText = function addText(text) {\n  if (text.length) {\n    if (!this.partialText) {\n      this.partialText = text;\n    } else if (this.concatParts) {\n      this.concatParts.push(text);\n    } else {\n      this.concatParts = [this.partialText, text];\n    }\n  }\n};\n\nInterpolationParts.prototype.addExpressionFn = function addExpressionFn(expressionFn) {\n  this.flushPartialText();\n  this.expressionIndices.push(this.textParts.length);\n  this.expressionFns.push(expressionFn);\n  this.textParts.push('');\n};\n\nInterpolationParts.prototype.getExpressionValues = function getExpressionValues(context) {\n  var expressionValues = new Array(this.expressionFns.length);\n  for (var i = 0; i < this.expressionFns.length; i++) {\n    expressionValues[i] = this.expressionFns[i](context);\n  }\n  return expressionValues;\n};\n\nInterpolationParts.prototype.getResult = function getResult(expressionValues) {\n  for (var i = 0; i < this.expressionIndices.length; i++) {\n    var expressionValue = expressionValues[i];\n    if (this.allOrNothing && expressionValue === undefined) return;\n    this.textParts[this.expressionIndices[i]] = expressionValue;\n  }\n  return this.textParts.join('');\n};\n\n\nInterpolationParts.prototype.toParsedFn = function toParsedFn(mustHaveExpression, originalText) {\n  var self = this;\n  this.flushPartialText();\n  if (mustHaveExpression && this.expressionFns.length === 0) {\n    return undefined;\n  }\n  if (this.textParts.length === 0) {\n    return parseTextLiteral('');\n  }\n  if (this.trustedContext && this.textParts.length > 1) {\n    $interpolateMinErr['throwNoconcat'](originalText);\n  }\n  if (this.expressionFns.length === 0) {\n    if (this.textParts.length !== 1) { this.errorInParseLogic(); }\n    return parseTextLiteral(this.textParts[0]);\n  }\n  var parsedFn = function(context) {\n    return self.getResult(self.getExpressionValues(context));\n  };\n  parsedFn['$$watchDelegate'] = function $$watchDelegate(scope, listener, objectEquality) {\n    return self.watchDelegate(scope, listener, objectEquality);\n  };\n\n  parsedFn['exp'] = originalText; // Needed to pretend to be $interpolate for tests copied from interpolateSpec.js\n  parsedFn['expressions'] = new Array(this.expressionFns.length); // Require this to call $compile.$$addBindingInfo() which allows Protractor to find elements by binding.\n  for (var i = 0; i < this.expressionFns.length; i++) {\n    parsedFn['expressions'][i] = this.expressionFns[i]['exp'];\n  }\n\n  return parsedFn;\n};\n\nInterpolationParts.prototype.watchDelegate = function watchDelegate(scope, listener, objectEquality) {\n  var watcher = new InterpolationPartsWatcher(this, scope, listener, objectEquality);\n  return function() { watcher.cancelWatch(); };\n};\n\nfunction InterpolationPartsWatcher(interpolationParts, scope, listener, objectEquality) {\n  this.interpolationParts = interpolationParts;\n  this.scope = scope;\n  this.previousResult = (undefined);\n  this.listener = listener;\n  var self = this;\n  this.expressionFnsWatcher = scope['$watchGroup'](interpolationParts.expressionFns, function(newExpressionValues, oldExpressionValues) {\n    self.watchListener(newExpressionValues, oldExpressionValues);\n  });\n}\n\nInterpolationPartsWatcher.prototype.watchListener = function watchListener(newExpressionValues, oldExpressionValues) {\n  var result = this.interpolationParts.getResult(newExpressionValues);\n  if (isFunction(this.listener)) {\n    this.listener.call(null, result, newExpressionValues === oldExpressionValues ? result : this.previousResult, this.scope);\n  }\n  this.previousResult = result;\n};\n\nInterpolationPartsWatcher.prototype.cancelWatch = function cancelWatch() {\n  this.expressionFnsWatcher();\n};\n\n// NOTE: ADVANCED_OPTIMIZATIONS mode.\n//\n// This file is compiled with Closure compiler's ADVANCED_OPTIMIZATIONS flag! Be wary of using\n// constructs incompatible with that mode.\n\n/* global $interpolateMinErr: false */\n/* global indexToLineAndColumn: false */\n/* global InterpolationParts: false */\n/* global PluralMessage: false */\n/* global SelectMessage: false */\n/* global subtractOffset: false */\n\n// The params src and dst are exactly one of two types: NestedParserState or MessageFormatParser.\n// This function is fully optimized by V8. (inspect via IRHydra or --trace-deopt.)\n// The idea behind writing it this way is to avoid repeating oneself.  This is the ONE place where\n// the parser state that is saved/restored when parsing nested mustaches is specified.\nfunction copyNestedParserState(src, dst) {\n  dst.expressionFn = src.expressionFn;\n  dst.expressionMinusOffsetFn = src.expressionMinusOffsetFn;\n  dst.pluralOffset = src.pluralOffset;\n  dst.choices = src.choices;\n  dst.choiceKey = src.choiceKey;\n  dst.interpolationParts = src.interpolationParts;\n  dst.ruleChoiceKeyword = src.ruleChoiceKeyword;\n  dst.msgStartIndex = src.msgStartIndex;\n  dst.expressionStartIndex = src.expressionStartIndex;\n}\n\nfunction NestedParserState(parser) {\n  copyNestedParserState(parser, this);\n}\n\n/**\n * @constructor\n * @private\n */\nfunction MessageFormatParser(text, startIndex, $parse, pluralCat, stringifier,\n                             mustHaveExpression, trustedContext, allOrNothing) {\n  this.text = text;\n  this.index = startIndex || 0;\n  this.$parse = $parse;\n  this.pluralCat = pluralCat;\n  this.stringifier = stringifier;\n  this.mustHaveExpression = !!mustHaveExpression;\n  this.trustedContext = trustedContext;\n  this.allOrNothing = !!allOrNothing;\n  this.expressionFn = null;\n  this.expressionMinusOffsetFn = null;\n  this.pluralOffset = null;\n  this.choices = null;\n  this.choiceKey = null;\n  this.interpolationParts = null;\n  this.msgStartIndex = null;\n  this.nestedStateStack = [];\n  this.parsedFn = null;\n  this.rule = null;\n  this.ruleStack = null;\n  this.ruleChoiceKeyword = null;\n  this.interpNestLevel = null;\n  this.expressionStartIndex = null;\n  this.stringStartIndex = null;\n  this.stringQuote = null;\n  this.stringInterestsRe = null;\n  this.angularOperatorStack = null;\n  this.textPart = null;\n}\n\n// preserve v8 optimization.\nvar EMPTY_STATE = new NestedParserState(new MessageFormatParser(\n        /* text= */ '', /* startIndex= */ 0, /* $parse= */ null, /* pluralCat= */ null, /* stringifier= */ null,\n        /* mustHaveExpression= */ false, /* trustedContext= */ null, /* allOrNothing */ false));\n\nMessageFormatParser.prototype.pushState = function pushState() {\n  this.nestedStateStack.push(new NestedParserState(this));\n  copyNestedParserState(EMPTY_STATE, this);\n};\n\nMessageFormatParser.prototype.popState = function popState() {\n  if (this.nestedStateStack.length === 0) {\n    this.errorInParseLogic();\n  }\n  var previousState = this.nestedStateStack.pop();\n  copyNestedParserState(previousState, this);\n};\n\n// Oh my JavaScript!  Who knew you couldn't match a regex at a specific\n// location in a string but will always search forward?!\n// Apparently you'll be growing this ability via the sticky flag (y) in\n// ES6.  I'll just to work around you for now.\nMessageFormatParser.prototype.matchRe = function matchRe(re, search) {\n  re.lastIndex = this.index;\n  var match = re.exec(this.text);\n  if (match != null && (search === true || (match.index === this.index))) {\n    this.index = re.lastIndex;\n    return match;\n  }\n  return null;\n};\n\nMessageFormatParser.prototype.searchRe = function searchRe(re) {\n  return this.matchRe(re, true);\n};\n\n\nMessageFormatParser.prototype.consumeRe = function consumeRe(re) {\n  // Without the sticky flag, we can't use the .test() method to consume a\n  // match at the current index.  Instead, we'll use the slower .exec() method\n  // and verify match.index.\n  return !!this.matchRe(re);\n};\n\n// Run through our grammar avoiding deeply nested function call chains.\nMessageFormatParser.prototype.run = function run(initialRule) {\n  this.ruleStack = [initialRule];\n  do {\n    this.rule = this.ruleStack.pop();\n    while (this.rule) {\n      this.rule();\n    }\n    this.assertRuleOrNull(this.rule);\n  } while (this.ruleStack.length > 0);\n};\n\nMessageFormatParser.prototype.errorInParseLogic = function errorInParseLogic() {\n    throw $interpolateMinErr('logicbug',\n        'The messageformat parser has encountered an internal error.  Please file a github issue against the AngularJS project and provide this message text that triggers the bug.  Text: “{0}”',\n        this.text);\n};\n\nMessageFormatParser.prototype.assertRuleOrNull = function assertRuleOrNull(rule) {\n  if (rule === undefined) {\n    this.errorInParseLogic();\n  }\n};\n\nvar NEXT_WORD_RE = /\\s*(\\w+)\\s*/g;\nMessageFormatParser.prototype.errorExpecting = function errorExpecting() {\n  // What was wrong with the syntax? Unsupported type, missing comma, or something else?\n  var match = this.matchRe(NEXT_WORD_RE), position;\n  if (match == null) {\n    position = indexToLineAndColumn(this.text, this.index);\n    throw $interpolateMinErr('reqarg',\n        'Expected one of “plural” or “select” at line {0}, column {1} of text “{2}”',\n        position.line, position.column, this.text);\n  }\n  var word = match[1];\n  if (word === 'select' || word === 'plural') {\n    position = indexToLineAndColumn(this.text, this.index);\n    throw $interpolateMinErr('reqcomma',\n        'Expected a comma after the keyword “{0}” at line {1}, column {2} of text “{3}”',\n        word, position.line, position.column, this.text);\n  } else {\n    position = indexToLineAndColumn(this.text, this.index);\n    throw $interpolateMinErr('unknarg',\n        'Unsupported keyword “{0}” at line {0}, column {1}. Only “plural” and “select” are currently supported.  Text: “{3}”',\n        word, position.line, position.column, this.text);\n  }\n};\n\nvar STRING_START_RE = /['\"]/g;\nMessageFormatParser.prototype.ruleString = function ruleString() {\n  var match = this.matchRe(STRING_START_RE);\n  if (match == null) {\n    var position = indexToLineAndColumn(this.text, this.index);\n    throw $interpolateMinErr('wantstring',\n        'Expected the beginning of a string at line {0}, column {1} in text “{2}”',\n        position.line, position.column, this.text);\n  }\n  this.startStringAtMatch(match);\n};\n\nMessageFormatParser.prototype.startStringAtMatch = function startStringAtMatch(match) {\n  this.stringStartIndex = match.index;\n  this.stringQuote = match[0];\n  this.stringInterestsRe = this.stringQuote === '\\'' ? SQUOTED_STRING_INTEREST_RE : DQUOTED_STRING_INTEREST_RE;\n  this.rule = this.ruleInsideString;\n};\n\nvar SQUOTED_STRING_INTEREST_RE = /\\\\(?:\\\\|'|u[0-9A-Fa-f]{4}|x[0-9A-Fa-f]{2}|[0-7]{3}|\\r\\n|\\n|[\\s\\S])|'/g;\nvar DQUOTED_STRING_INTEREST_RE = /\\\\(?:\\\\|\"|u[0-9A-Fa-f]{4}|x[0-9A-Fa-f]{2}|[0-7]{3}|\\r\\n|\\n|[\\s\\S])|\"/g;\nMessageFormatParser.prototype.ruleInsideString = function ruleInsideString() {\n  var match = this.searchRe(this.stringInterestsRe);\n  if (match == null) {\n    var position = indexToLineAndColumn(this.text, this.stringStartIndex);\n    throw $interpolateMinErr('untermstr',\n        'The string beginning at line {0}, column {1} is unterminated in text “{2}”',\n        position.line, position.column, this.text);\n  }\n  if (match[0] === this.stringQuote) {\n    this.rule = null;\n  }\n};\n\nvar PLURAL_OR_SELECT_ARG_TYPE_RE = /\\s*(plural|select)\\s*,\\s*/g;\nMessageFormatParser.prototype.rulePluralOrSelect = function rulePluralOrSelect() {\n  var match = this.searchRe(PLURAL_OR_SELECT_ARG_TYPE_RE);\n  if (match == null) {\n    this.errorExpecting();\n  }\n  var argType = match[1];\n  switch (argType) {\n    case 'plural': this.rule = this.rulePluralStyle; break;\n    case 'select': this.rule = this.ruleSelectStyle; break;\n    default: this.errorInParseLogic();\n  }\n};\n\nMessageFormatParser.prototype.rulePluralStyle = function rulePluralStyle() {\n  this.choices = Object.create(null);\n  this.ruleChoiceKeyword = this.rulePluralValueOrKeyword;\n  this.rule = this.rulePluralOffset;\n};\n\nMessageFormatParser.prototype.ruleSelectStyle = function ruleSelectStyle() {\n  this.choices = Object.create(null);\n  this.ruleChoiceKeyword = this.ruleSelectKeyword;\n  this.rule = this.ruleSelectKeyword;\n};\n\nvar NUMBER_RE = /[0]|(?:[1-9][0-9]*)/g;\nvar PLURAL_OFFSET_RE = new RegExp('\\\\s*offset\\\\s*:\\\\s*(' + NUMBER_RE.source + ')', 'g');\n\nMessageFormatParser.prototype.rulePluralOffset = function rulePluralOffset() {\n  var match = this.matchRe(PLURAL_OFFSET_RE);\n  this.pluralOffset = (match == null) ? 0 : parseInt(match[1], 10);\n  this.expressionMinusOffsetFn = subtractOffset(this.expressionFn, this.pluralOffset);\n  this.rule = this.rulePluralValueOrKeyword;\n};\n\nMessageFormatParser.prototype.assertChoiceKeyIsNew = function assertChoiceKeyIsNew(choiceKey, index) {\n  if (this.choices[choiceKey] !== undefined) {\n    var position = indexToLineAndColumn(this.text, index);\n    throw $interpolateMinErr('dupvalue',\n        'The choice “{0}” is specified more than once. Duplicate key is at line {1}, column {2} in text “{3}”',\n        choiceKey, position.line, position.column, this.text);\n  }\n};\n\nvar SELECT_KEYWORD = /\\s*(\\w+)/g;\nMessageFormatParser.prototype.ruleSelectKeyword = function ruleSelectKeyword() {\n  var match = this.matchRe(SELECT_KEYWORD);\n  if (match == null) {\n    this.parsedFn = new SelectMessage(this.expressionFn, this.choices).parsedFn;\n    this.rule = null;\n    return;\n  }\n  this.choiceKey = match[1];\n  this.assertChoiceKeyIsNew(this.choiceKey, match.index);\n  this.rule = this.ruleMessageText;\n};\n\nvar EXPLICIT_VALUE_OR_KEYWORD_RE = new RegExp('\\\\s*(?:(?:=(' + NUMBER_RE.source + '))|(\\\\w+))', 'g');\nMessageFormatParser.prototype.rulePluralValueOrKeyword = function rulePluralValueOrKeyword() {\n  var match = this.matchRe(EXPLICIT_VALUE_OR_KEYWORD_RE);\n  if (match == null) {\n    this.parsedFn = new PluralMessage(this.expressionFn, this.choices, this.pluralOffset, this.pluralCat).parsedFn;\n    this.rule = null;\n    return;\n  }\n  if (match[1] != null) {\n    this.choiceKey = parseInt(match[1], 10);\n  } else {\n    this.choiceKey = match[2];\n  }\n  this.assertChoiceKeyIsNew(this.choiceKey, match.index);\n  this.rule = this.ruleMessageText;\n};\n\nvar BRACE_OPEN_RE = /\\s*\\{/g;\nvar BRACE_CLOSE_RE = /}/g;\nMessageFormatParser.prototype.ruleMessageText = function ruleMessageText() {\n  if (!this.consumeRe(BRACE_OPEN_RE)) {\n    var position = indexToLineAndColumn(this.text, this.index);\n    throw $interpolateMinErr('reqopenbrace',\n        'The plural choice “{0}” must be followed by a message in braces at line {1}, column {2} in text “{3}”',\n        this.choiceKey, position.line, position.column, this.text);\n  }\n  this.msgStartIndex = this.index;\n  this.interpolationParts = new InterpolationParts(this.trustedContext, this.allOrNothing);\n  this.rule = this.ruleInInterpolationOrMessageText;\n};\n\n// Note: Since \"\\\" is used as an escape character, don't allow it to be part of the\n// startSymbol/endSymbol when I add the feature to allow them to be redefined.\nvar INTERP_OR_END_MESSAGE_RE = /\\\\.|{{|}/g;\nvar INTERP_OR_PLURALVALUE_OR_END_MESSAGE_RE = /\\\\.|{{|#|}/g;\nvar ESCAPE_OR_MUSTACHE_BEGIN_RE = /\\\\.|{{/g;\nMessageFormatParser.prototype.advanceInInterpolationOrMessageText = function advanceInInterpolationOrMessageText() {\n  var currentIndex = this.index, match;\n  if (this.ruleChoiceKeyword == null) { // interpolation\n    match = this.searchRe(ESCAPE_OR_MUSTACHE_BEGIN_RE);\n    if (match == null) { // End of interpolation text.  Nothing more to process.\n      this.textPart = this.text.substring(currentIndex);\n      this.index = this.text.length;\n      return null;\n    }\n  } else {\n    match = this.searchRe(this.ruleChoiceKeyword === this.rulePluralValueOrKeyword ?\n                          INTERP_OR_PLURALVALUE_OR_END_MESSAGE_RE : INTERP_OR_END_MESSAGE_RE);\n    if (match == null) {\n      var position = indexToLineAndColumn(this.text, this.msgStartIndex);\n      throw $interpolateMinErr('reqendbrace',\n          'The plural/select choice “{0}” message starting at line {1}, column {2} does not have an ending closing brace. Text “{3}”',\n          this.choiceKey, position.line, position.column, this.text);\n    }\n  }\n  // match is non-null.\n  var token = match[0];\n  this.textPart = this.text.substring(currentIndex, match.index);\n  return token;\n};\n\nMessageFormatParser.prototype.ruleInInterpolationOrMessageText = function ruleInInterpolationOrMessageText() {\n  var currentIndex = this.index;\n  var token = this.advanceInInterpolationOrMessageText();\n  if (token == null) {\n    // End of interpolation text.  Nothing more to process.\n    this.index = this.text.length;\n    this.interpolationParts.addText(this.text.substring(currentIndex));\n    this.rule = null;\n    return;\n  }\n  if (token[0] === '\\\\') {\n    // unescape next character and continue\n    this.interpolationParts.addText(this.textPart + token[1]);\n    return;\n  }\n  this.interpolationParts.addText(this.textPart);\n  if (token === '{{') {\n    this.pushState();\n    this.ruleStack.push(this.ruleEndMustacheInInterpolationOrMessage);\n    this.rule = this.ruleEnteredMustache;\n  } else if (token === '}') {\n    this.choices[this.choiceKey] = this.interpolationParts.toParsedFn(/*mustHaveExpression=*/false, this.text);\n    this.rule = this.ruleChoiceKeyword;\n  } else if (token === '#') {\n    this.interpolationParts.addExpressionFn(this.expressionMinusOffsetFn);\n  } else {\n    this.errorInParseLogic();\n  }\n};\n\nMessageFormatParser.prototype.ruleInterpolate = function ruleInterpolate() {\n  this.interpolationParts = new InterpolationParts(this.trustedContext, this.allOrNothing);\n  this.rule = this.ruleInInterpolation;\n};\n\nMessageFormatParser.prototype.ruleInInterpolation = function ruleInInterpolation() {\n  var currentIndex = this.index;\n  var match = this.searchRe(ESCAPE_OR_MUSTACHE_BEGIN_RE);\n  if (match == null) {\n    // End of interpolation text.  Nothing more to process.\n    this.index = this.text.length;\n    this.interpolationParts.addText(this.text.substring(currentIndex));\n    this.parsedFn = this.interpolationParts.toParsedFn(this.mustHaveExpression, this.text);\n    this.rule = null;\n    return;\n  }\n  var token = match[0];\n  if (token[0] === '\\\\') {\n    // unescape next character and continue\n    this.interpolationParts.addText(this.text.substring(currentIndex, match.index) + token[1]);\n    return;\n  }\n  this.interpolationParts.addText(this.text.substring(currentIndex, match.index));\n  this.pushState();\n  this.ruleStack.push(this.ruleInterpolationEndMustache);\n  this.rule = this.ruleEnteredMustache;\n};\n\nMessageFormatParser.prototype.ruleInterpolationEndMustache = function ruleInterpolationEndMustache() {\n  var expressionFn = this.parsedFn;\n  this.popState();\n  this.interpolationParts.addExpressionFn(expressionFn);\n  this.rule = this.ruleInInterpolation;\n};\n\nMessageFormatParser.prototype.ruleEnteredMustache = function ruleEnteredMustache() {\n  this.parsedFn = null;\n  this.ruleStack.push(this.ruleEndMustache);\n  this.rule = this.ruleAngularExpression;\n};\n\nMessageFormatParser.prototype.ruleEndMustacheInInterpolationOrMessage = function ruleEndMustacheInInterpolationOrMessage() {\n  var expressionFn = this.parsedFn;\n  this.popState();\n  this.interpolationParts.addExpressionFn(expressionFn);\n  this.rule = this.ruleInInterpolationOrMessageText;\n};\n\n\n\nvar INTERP_END_RE = /\\s*}}/g;\nMessageFormatParser.prototype.ruleEndMustache = function ruleEndMustache() {\n  var match = this.matchRe(INTERP_END_RE);\n  if (match == null) {\n    var position = indexToLineAndColumn(this.text, this.index);\n    throw $interpolateMinErr('reqendinterp',\n        'Expecting end of interpolation symbol, “{0}”, at line {1}, column {2} in text “{3}”',\n        '}}', position.line, position.column, this.text);\n  }\n  if (this.parsedFn == null) {\n    // If we parsed a MessageFormat extension, (e.g. select/plural today, maybe more some other\n    // day), then the result *has* to be a string and those rules would have already set\n    // this.parsedFn.  If there was no MessageFormat extension, then there is no requirement to\n    // stringify the result and parsedFn isn't set.  We set it here.  While we could have set it\n    // unconditionally when exiting the Angular expression, I intend for us to not just replace\n    // $interpolate, but also to replace $parse in a future version (so ng-bind can work), and in\n    // such a case we do not want to unnecessarily stringify something if it's not going to be used\n    // in a string context.\n    this.parsedFn = this.$parse(this.expressionFn, this.stringifier);\n    this.parsedFn['exp'] = this.expressionFn['exp']; // Needed to pretend to be $interpolate for tests copied from interpolateSpec.js\n    this.parsedFn['expressions'] = this.expressionFn['expressions']; // Require this to call $compile.$$addBindingInfo() which allows Protractor to find elements by binding.\n  }\n  this.rule = null;\n};\n\nMessageFormatParser.prototype.ruleAngularExpression = function ruleAngularExpression() {\n  this.angularOperatorStack = [];\n  this.expressionStartIndex = this.index;\n  this.rule = this.ruleInAngularExpression;\n};\n\nfunction getEndOperator(opBegin) {\n  switch (opBegin) {\n    case '{': return '}';\n    case '[': return ']';\n    case '(': return ')';\n    default: return null;\n  }\n}\n\nfunction getBeginOperator(opEnd) {\n  switch (opEnd) {\n    case '}': return '{';\n    case ']': return '[';\n    case ')': return '(';\n    default: return null;\n  }\n}\n\n// TODO(chirayu): The interpolation endSymbol must also be accounted for. It\n// just so happens that \"}\" is an operator so it's in the list below.  But we\n// should support any other type of start/end interpolation symbol.\nvar INTERESTING_OPERATORS_RE = /[[\\]{}()'\",]/g;\nMessageFormatParser.prototype.ruleInAngularExpression = function ruleInAngularExpression() {\n  var match = this.searchRe(INTERESTING_OPERATORS_RE);\n  var position;\n  if (match == null) {\n    if (this.angularOperatorStack.length === 0) {\n      // This is the end of the Angular expression so this is actually a\n      // success.  Note that when inside an interpolation, this means we even\n      // consumed the closing interpolation symbols if they were curlies.  This\n      // is NOT an error at this point but will become an error further up the\n      // stack when the part that saw the opening curlies is unable to find the\n      // closing ones.\n      this.index = this.text.length;\n      this.expressionFn = this.$parse(this.text.substring(this.expressionStartIndex, this.index));\n      // Needed to pretend to be $interpolate for tests copied from interpolateSpec.js\n      this.expressionFn['exp'] = this.text.substring(this.expressionStartIndex, this.index);\n      this.expressionFn['expressions'] = this.expressionFn['expressions'];\n      this.rule = null;\n      return;\n    }\n    var innermostOperator = this.angularOperatorStack[0];\n    throw $interpolateMinErr('badexpr',\n        'Unexpected end of Angular expression.  Expecting operator “{0}” at the end of the text “{1}”',\n        this.getEndOperator(innermostOperator), this.text);\n  }\n  var operator = match[0];\n  if (operator === '\\'' || operator === '\"') {\n    this.ruleStack.push(this.ruleInAngularExpression);\n    this.startStringAtMatch(match);\n    return;\n  }\n  if (operator === ',') {\n    if (this.trustedContext) {\n      position = indexToLineAndColumn(this.text, this.index);\n      throw $interpolateMinErr('unsafe',\n          'Use of select/plural MessageFormat syntax is currently disallowed in a secure context ({0}).  At line {1}, column {2} of text “{3}”',\n          this.trustedContext, position.line, position.column, this.text);\n    }\n    // only the top level comma has relevance.\n    if (this.angularOperatorStack.length === 0) {\n      // todo: does this need to be trimmed?\n      this.expressionFn = this.$parse(this.text.substring(this.expressionStartIndex, match.index));\n      // Needed to pretend to be $interpolate for tests copied from interpolateSpec.js\n      this.expressionFn['exp'] = this.text.substring(this.expressionStartIndex, match.index);\n      this.expressionFn['expressions'] = this.expressionFn['expressions'];\n      this.rule = null;\n      this.rule = this.rulePluralOrSelect;\n    }\n    return;\n  }\n  if (getEndOperator(operator) != null) {\n    this.angularOperatorStack.unshift(operator);\n    return;\n  }\n  var beginOperator = getBeginOperator(operator);\n  if (beginOperator == null) {\n    this.errorInParseLogic();\n  }\n  if (this.angularOperatorStack.length > 0) {\n    if (beginOperator === this.angularOperatorStack[0]) {\n      this.angularOperatorStack.shift();\n      return;\n    }\n    position = indexToLineAndColumn(this.text, this.index);\n    throw $interpolateMinErr('badexpr',\n        'Unexpected operator “{0}” at line {1}, column {2} in text. Was expecting “{3}”. Text: “{4}”',\n        operator, position.line, position.column, getEndOperator(this.angularOperatorStack[0]), this.text);\n  }\n  // We are trying to pop off the operator stack but there really isn't anything to pop off.\n  this.index = match.index;\n  this.expressionFn = this.$parse(this.text.substring(this.expressionStartIndex, this.index));\n  // Needed to pretend to be $interpolate for tests copied from interpolateSpec.js\n  this.expressionFn['exp'] = this.text.substring(this.expressionStartIndex, this.index);\n  this.expressionFn['expressions'] = this.expressionFn['expressions'];\n  this.rule = null;\n};\n\n// NOTE: ADVANCED_OPTIMIZATIONS mode.\n//\n// This file is compiled with Closure compiler's ADVANCED_OPTIMIZATIONS flag! Be wary of using\n// constructs incompatible with that mode.\n\n/* global $interpolateMinErr: true */\n/* global isFunction: true */\n/* global noop: true */\n/* global toJson: true */\n/* global MessageFormatParser: false */\n\n/**\n * @ngdoc module\n * @name ngMessageFormat\n * @packageName angular-message-format\n *\n * @description\n *\n * ## What is  ngMessageFormat?\n *\n * The ngMessageFormat module extends the Angular {@link ng.$interpolate `$interpolate`} service\n * with a syntax for handling pluralization and gender specific messages, which is based on the\n * [ICU MessageFormat syntax][ICU].\n *\n * See [the design doc][ngMessageFormat doc] for more information.\n *\n * [ICU]: http://userguide.icu-project.org/formatparse/messages#TOC-MessageFormat\n * [ngMessageFormat doc]: https://docs.google.com/a/google.com/document/d/1pbtW2yvtmFBikfRrJd8VAsabiFkKezmYZ_PbgdjQOVU/edit\n *\n * ## Examples\n *\n * ### Gender\n *\n * This example uses the \"select\" keyword to specify the message based on gender.\n *\n * <example name=\"ngMessageFormat-example-gender\" module=\"msgFmtExample\" deps=\"angular-message-format.js\">\n * <file name=\"index.html\">\n *  <div ng-controller=\"AppController\">\n *    Select Recipient:<br>\n      <select ng-model=\"recipient\" ng-options=\"person as person.name for person in recipients\">\n      </select>\n      <p>{{recipient.gender, select,\n                male {{{recipient.name}} unwrapped his gift. }\n                female {{{recipient.name}} unwrapped her gift. }\n                other {{{recipient.name}} unwrapped their gift. }\n      }}</p>\n *  </div>\n * </file>\n * <file name=\"script.js\">\n *   function Person(name, gender) {\n *     this.name = name;\n *     this.gender = gender;\n *   }\n *\n *   var alice   = new Person('Alice', 'female'),\n *       bob     = new Person('Bob', 'male'),\n *       ashley = new Person('Ashley', '');\n *\n *   angular.module('msgFmtExample', ['ngMessageFormat'])\n *     .controller('AppController', ['$scope', function($scope) {\n *         $scope.recipients = [alice, bob, ashley];\n *         $scope.recipient = $scope.recipients[0];\n *       }]);\n * </file>\n * </example>\n *\n * ### Plural\n *\n * This example shows how the \"plural\" keyword is used to account for a variable number of entities.\n * The \"#\" variable holds the current number and can be embedded in the message.\n *\n * Note that \"=1\" takes precedence over \"one\".\n *\n * The example also shows the \"offset\" keyword, which allows you to offset the value of the \"#\" variable.\n *\n * <example name=\"ngMessageFormat-example-plural\" module=\"msgFmtExample\" deps=\"angular-message-format.js\">\n * <file name=\"index.html\">\n *   <div ng-controller=\"AppController\">\n *    <button ng-click=\"recipients.pop()\" id=\"decreaseRecipients\">decreaseRecipients</button><br>\n *    Select recipients:<br>\n *    <select multiple size=5 ng-model=\"recipients\" ng-options=\"person as person.name for person in people\">\n *    </select><br>\n *     <p>{{recipients.length, plural, offset:1\n *             =0    {{{sender.name}} gave no gifts (\\#=#)}\n *             =1    {{{sender.name}} gave a gift to {{recipients[0].name}} (\\#=#)}\n *             one   {{{sender.name}} gave {{recipients[0].name}} and one other person a gift (\\#=#)}\n *             other {{{sender.name}} gave {{recipients[0].name}} and # other people a gift (\\#=#)}\n *           }}</p>\n *   </div>\n * </file>\n *\n * <file name=\"script.js\">\n *   function Person(name, gender) {\n *     this.name = name;\n *     this.gender = gender;\n *   }\n *\n *   var alice   = new Person('Alice', 'female'),\n *       bob     = new Person('Bob', 'male'),\n *       sarah     = new Person('Sarah', 'female'),\n *       harry   = new Person('Harry Potter', 'male'),\n *       ashley   = new Person('Ashley', '');\n *\n *   angular.module('msgFmtExample', ['ngMessageFormat'])\n *     .controller('AppController', ['$scope', function($scope) {\n *         $scope.people = [alice, bob, sarah, ashley];\n *         $scope.recipients = [alice, bob, sarah];\n *         $scope.sender = harry;\n *       }]);\n * </file>\n *\n * <file name=\"protractor.js\" type=\"protractor\">\n *   describe('MessageFormat plural', function() {\n *\n *     it('should pluralize initial values', function() {\n *       var messageElem = element(by.binding('recipients.length')),\n *           decreaseRecipientsBtn = element(by.id('decreaseRecipients'));\n *\n *       expect(messageElem.getText()).toEqual('Harry Potter gave Alice and 2 other people a gift (#=2)');\n *       decreaseRecipientsBtn.click();\n *       expect(messageElem.getText()).toEqual('Harry Potter gave Alice and one other person a gift (#=1)');\n *       decreaseRecipientsBtn.click();\n *       expect(messageElem.getText()).toEqual('Harry Potter gave a gift to Alice (#=0)');\n *       decreaseRecipientsBtn.click();\n *       expect(messageElem.getText()).toEqual('Harry Potter gave no gifts (#=-1)');\n *     });\n *   });\n * </file>\n * </example>\n *\n * ### Plural and Gender together\n *\n * This example shows how you can specify gender rules for specific plural matches - in this case,\n * =1 is special cased for gender.\n * <example name=\"ngMessageFormat-example-plural-gender\" module=\"msgFmtExample\" deps=\"angular-message-format.js\">\n *   <file name=\"index.html\">\n *     <div ng-controller=\"AppController\">\n       Select recipients:<br>\n       <select multiple size=5 ng-model=\"recipients\" ng-options=\"person as person.name for person in people\">\n       </select><br>\n        <p>{{recipients.length, plural,\n          =0 {{{sender.name}} has not given any gifts to anyone.}\n          =1 {  {{recipients[0].gender, select,\n                 female { {{sender.name}} gave {{recipients[0].name}} her gift.}\n                 male { {{sender.name}} gave {{recipients[0].name}} his gift.}\n                 other { {{sender.name}} gave {{recipients[0].name}} their gift.}\n                }}\n              }\n          other {{{sender.name}} gave {{recipients.length}} people gifts.}\n          }}</p>\n      </file>\n *    <file name=\"script.js\">\n *      function Person(name, gender) {\n *        this.name = name;\n *        this.gender = gender;\n *      }\n *\n *      var alice   = new Person('Alice', 'female'),\n *          bob     = new Person('Bob', 'male'),\n *          harry   = new Person('Harry Potter', 'male'),\n *          ashley   = new Person('Ashley', '');\n *\n *      angular.module('msgFmtExample', ['ngMessageFormat'])\n *        .controller('AppController', ['$scope', function($scope) {\n *            $scope.people = [alice, bob, ashley];\n *            $scope.recipients = [alice];\n *            $scope.sender = harry;\n *          }]);\n *    </file>\n    </example>\n */\n\nvar $$MessageFormatFactory = ['$parse', '$locale', '$sce', '$exceptionHandler', function $$messageFormat(\n                               $parse,   $locale,   $sce,   $exceptionHandler) {\n\n  function getStringifier(trustedContext, allOrNothing, text) {\n    return function stringifier(value) {\n      try {\n        value = trustedContext ? $sce['getTrusted'](trustedContext, value) : $sce['valueOf'](value);\n        return allOrNothing && (value === undefined) ? value : $$stringify(value);\n      } catch (err) {\n        $exceptionHandler($interpolateMinErr['interr'](text, err));\n      }\n    };\n  }\n\n  function interpolate(text, mustHaveExpression, trustedContext, allOrNothing) {\n    var stringifier = getStringifier(trustedContext, allOrNothing, text);\n    var parser = new MessageFormatParser(text, 0, $parse, $locale['pluralCat'], stringifier,\n                                         mustHaveExpression, trustedContext, allOrNothing);\n    parser.run(parser.ruleInterpolate);\n    return parser.parsedFn;\n  }\n\n  return {\n    'interpolate': interpolate\n  };\n}];\n\nvar $$interpolateDecorator = ['$$messageFormat', '$delegate', function $$interpolateDecorator($$messageFormat, $interpolate) {\n  if ($interpolate['startSymbol']() !== '{{' || $interpolate['endSymbol']() !== '}}') {\n    throw $interpolateMinErr('nochgmustache', 'angular-message-format.js currently does not allow you to use custom start and end symbols for interpolation.');\n  }\n  var interpolate = $$messageFormat['interpolate'];\n  interpolate['startSymbol'] = $interpolate['startSymbol'];\n  interpolate['endSymbol'] = $interpolate['endSymbol'];\n  return interpolate;\n}];\n\nvar $interpolateMinErr;\nvar isFunction;\nvar noop;\nvar toJson;\nvar $$stringify;\n\nvar module = window['angular']['module']('ngMessageFormat', ['ng']);\nmodule['info']({ 'angularVersion': '1.6.6' });\nmodule['factory']('$$messageFormat', $$MessageFormatFactory);\nmodule['config'](['$provide', function($provide) {\n  $interpolateMinErr = window['angular']['$interpolateMinErr'];\n  isFunction = window['angular']['isFunction'];\n  noop = window['angular']['noop'];\n  toJson = window['angular']['toJson'];\n  $$stringify = window['angular']['$$stringify'];\n\n  $provide['decorator']('$interpolate', $$interpolateDecorator);\n}]);\n\n\n})(window, window.angular);\n"]}